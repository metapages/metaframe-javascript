{"version":3,"file":"index.13d31d67.js","sources":["../../vite/modulepreload-polyfill","../../src/components/Editor.tsx","../../src/components/OptionsMenu.tsx","../../src/store.ts","../../src/components/CodeResults.tsx","../../src/hooks/codeHooks.ts","../../src/hooks/useExecuteCodeWithMetaframe.ts","../../src/components/ButtonRun.tsx","../../src/components/ButtonHelp.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import { FunctionalComponent } from \"preact\";\nimport MonacoEditor from \"@monaco-editor/react\";\n\nexport type EditorProps = {\n  mode: string;\n  value: string | undefined;\n  setValue: (value: string | undefined) => void;\n  theme: string;\n};\n\nexport const Editor: FunctionalComponent<EditorProps> = ({\n  mode,\n  value,\n  setValue,\n  theme,\n}) => {\n  return (\n    <MonacoEditor\n      defaultLanguage={mode}\n      theme={theme}\n      options={{\n        minimap: { enabled: false },\n      }}\n      onChange={setValue}\n      value={value}\n      width=\"100%\"\n      height=\"99vh\"\n    />\n  );\n};\n","import { FunctionalComponent } from \"preact\";\nimport { useCallback, useEffect, useState } from \"preact/hooks\";\nimport {\n  Box,\n  Drawer,\n  DrawerOverlay,\n  DrawerContent,\n  DrawerHeader,\n  DrawerBody,\n  Grid,\n  GridItem,\n  IconButton,\n  Input,\n  Select,\n  Switch,\n  Text,\n} from \"@chakra-ui/react\";\nimport { CheckIcon, CloseIcon, SettingsIcon } from \"@chakra-ui/icons\";\nimport { useHashParamJson } from \"@metapages/metaframe-hook\";\n\ntype OptionType = \"string\" | \"boolean\" | \"option\";\n\nexport type Option = {\n  name: string;\n  displayName: string;\n  default?: string | boolean;\n  type?: OptionType; // defaults to string\n  options?: string[];\n  validator?: (val: string | boolean) => string | undefined; // undefined == ðŸ‘, string is an error message\n  map?: (val: string | boolean) => any; // convert value to proper type\n};\n\nexport const OptionsMenuButton: FunctionalComponent<{ options: Option[] }> = ({\n  options,\n}) => {\n  const [open, setOpen] = useState<boolean>(false);\n\n  const onClick = useCallback(() => {\n    setOpen(!open);\n  }, [open]);\n\n  return (\n    <>\n      <IconButton\n        verticalAlign=\"top\"\n        aria-label=\"Metaframe settings\"\n        // @ts-ignore\n        icon={<SettingsIcon />}\n        // size=\"lg\"\n        onClick={onClick}\n      />\n      <OptionsMenu isOpen={open} setOpen={setOpen} options={options} />\n    </>\n  );\n};\n\ntype GenericOptions = Record<string, string | boolean>;\n\nconst OptionsMenu: FunctionalComponent<{\n  isOpen: boolean;\n  setOpen: (open: boolean) => void;\n  options: Option[];\n}> = ({ isOpen, setOpen, options }) => {\n  // isOpen = true; // for debugging/developing\n\n  const [optionsInHashParams, setOptionsInHashParams] =\n    useHashParamJson<GenericOptions>(\n      \"options\",\n      Object.fromEntries(\n        options\n          .filter((o) => o.default)\n          .map((option) => [option!.name!, option!.default!])\n      )\n    );\n\n  const [localOptions, setLocalOptions] = useState<GenericOptions>(\n    optionsInHashParams || {}\n  );\n  const [errors, setErrors] =\n    useState<Record<string, string> | undefined>(undefined);\n\n  const handleOnChange = useCallback(\n    (event: any) => {\n      const { name, value } = event.target as HTMLInputElement;\n      const option = options.find((o) => o.name === name) as Option; // assume we always find one since we configured it from options\n      if (option.type === \"boolean\") {\n        setLocalOptions({ ...localOptions, [name]: value === \"1\" });\n      } else {\n        setLocalOptions({ ...localOptions, [name]: value });\n      }\n    },\n    [localOptions, setLocalOptions]\n  );\n\n  const onClose = useCallback(() => {\n    setOpen(!isOpen);\n  }, [setOpen, isOpen]);\n\n  const onCloseAndAccept = useCallback(() => {\n    // first validate if available\n    const maybeErrors: Record<string, string> = {};\n    Object.keys(localOptions).forEach((key) => {\n      const option: Option | undefined = options.find((o) => o.name === key);\n      if (option && option.validator && option.type !== \"boolean\") {\n        const errorFromOption = option.validator(localOptions[key] as string);\n        if (errorFromOption) {\n          maybeErrors[key] = errorFromOption;\n        }\n      }\n    });\n    if (Object.keys(maybeErrors).length > 0) {\n      setErrors(maybeErrors);\n      return;\n    }\n    setErrors(undefined);\n\n    // assume valid!\n    // now maybe map to other values\n    const convertedOptions: GenericOptions = {};\n    Object.keys(localOptions).forEach((key) => {\n      const option: Option | undefined = options.find((o) => o.name === key);\n      if (option && option.map) {\n        convertedOptions[key] = option.map(localOptions[key]);\n      } else {\n        convertedOptions[key] = localOptions[key];\n      }\n    });\n\n    setOpen(!isOpen);\n    setOptionsInHashParams(convertedOptions);\n  }, [\n    setOpen,\n    isOpen,\n    options,\n    localOptions,\n    setOptionsInHashParams,\n    setErrors,\n  ]);\n\n  // preact complains in dev mode if this is moved out of a functional component\n  useEffect(() => {\n    const onKeyup = (e: KeyboardEvent) => {\n      if (e.key === \"Enter\" && isOpen) onCloseAndAccept();\n    };\n    window.addEventListener(\"keyup\", onKeyup);\n    return () => {\n      window.removeEventListener(\"keyup\", onKeyup);\n    };\n  }, [onCloseAndAccept, isOpen]);\n\n  return (\n    <Drawer placement=\"top\" onClose={onCloseAndAccept} isOpen={isOpen}>\n      <DrawerOverlay>\n        <DrawerContent>\n          <DrawerHeader borderBottomWidth=\"0px\">\n            Configure metaframe (stored in URL hash params )\n          </DrawerHeader>\n          <DrawerBody>\n            <Box\n              maxW=\"100%\"\n              p={2}\n              borderWidth=\"4px\"\n              borderRadius=\"lg\"\n              overflow=\"hidden\"\n            >\n              <Grid templateColumns=\"repeat(12, 1fr)\" gap={6}>\n                {options.map((option) => (\n                  <>\n                    <GridItem rowSpan={1} colSpan={4}>\n                      <Box\n                        w=\"100%\"\n                        h=\"100%\"\n                        display=\"flex\"\n                        alignItems=\"center\"\n                        justifyContent=\"flex-end\"\n                      >\n                        <Text textAlign={\"right\"} verticalAlign=\"bottom\">\n                          {option.displayName || option.name}:\n                        </Text>\n                      </Box>\n                    </GridItem>\n                    <GridItem rowSpan={1} colSpan={8}>\n                      {\" \"}\n                      {renderInput(\n                        option,\n                        localOptions[option.name],\n                        handleOnChange\n                      )}\n                    </GridItem>\n                  </>\n                ))}\n\n                <GridItem rowSpan={1} colSpan={12}></GridItem>\n                <GridItem rowSpan={1} colSpan={12}></GridItem>\n                <GridItem rowSpan={1} colSpan={12}></GridItem>\n                <GridItem rowSpan={1} colSpan={10}></GridItem>\n\n                <GridItem rowSpan={1} colSpan={1}>\n                  {/*\n                      // @ts-ignore */}\n                  <IconButton\n                    size=\"lg\"\n                    color=\"red\"\n                    icon={(<CloseIcon />) as any}\n                    onClick={onClose}\n                  />\n                </GridItem>\n\n                <GridItem rowSpan={1} colSpan={1}>\n                  {/*\n                      // @ts-ignore */}\n                  <IconButton\n                    size=\"lg\"\n                    color=\"green\"\n                    icon={(<CheckIcon />) as any}\n                    onClick={onCloseAndAccept}\n                  />\n                </GridItem>\n              </Grid>\n            </Box>\n          </DrawerBody>\n        </DrawerContent>\n      </DrawerOverlay>\n    </Drawer>\n  );\n};\n\nconst renderInput = (option: Option, value: any, onChange: any) => {\n  switch (option.type) {\n    case \"option\":\n      return (\n        <Select\n          name={option.name}\n          value={value}\n          onChange={onChange}\n          placeholder=\"Select option\"\n        >\n          {option.options!.map((optionChoice) => (\n            <option value={optionChoice}>{optionChoice}</option>\n          ))}\n        </Select>\n      );\n    case \"boolean\":\n      return (\n        <Switch\n          name={option.name}\n          // @ts-ignore\n          rightIcon={<CheckIcon />}\n          onChange={onChange}\n          isChecked={value === true || value === \"1\"}\n          value={value ? 0 : 1}\n        />\n      );\n    default:\n      return (\n        <Box w=\"100%\" h=\"10\">\n          <Input\n            name={option.name}\n            type=\"text\"\n            placeholder=\"\"\n            value={value}\n            onInput={onChange}\n          />\n        </Box>\n      );\n  }\n};\n","import create from \"zustand\";\nimport { CodeResult } from \"./hooks/codeHooks\";\n\nexport type MessagePayload = {\n  message: string;\n  type: \"error\" | \"warning\" | \"info\";\n  messages?: string[];\n};\n\nexport type StoreState = {\n  code: string | undefined;\n  result: CodeResult<any> | undefined;\n  running: boolean;\n  setCode: (code: string | undefined) => void;\n  setResult: (result: CodeResult<any> | undefined) => void;\n  setRunning: (running: boolean) => void;\n};\n\nexport const useStore = create<StoreState>((set) => ({\n  code: undefined,\n  result: undefined,\n  running: false,\n  setCode: (code: string | undefined) => set((state) => ({ code })),\n  setResult: (result: CodeResult<any> | undefined) =>\n    set((state) => ({ result })),\n  setRunning: (running: boolean) => set((state) => ({ running })),\n}));\n","import { FunctionalComponent } from \"preact\";\nimport {\n  Alert,\n  AlertIcon,\n  AlertTitle,\n  AlertDescription,\n} from \"@chakra-ui/react\";\nimport { useStore } from \"../store\";\nimport { BeatLoader } from \"react-spinners\";\n\nexport const CodeResults: FunctionalComponent = () => {\n  const running = useStore((state) => state.running);\n  const result = useStore((state) => state.result);\n\n  if (running) {\n    return <BeatLoader size={8} color=\"blue\" />;\n  }\n  if (!result) {\n    return null;\n  }\n\n  if (result.failure) {\n    return (\n      <>\n        <Alert status=\"error\">\n          <AlertIcon />\n          <AlertTitle mr={2}>\n            Error\n            {result?.failure?.phase ? \" in phase \" + result.failure.phase : \"\"}\n          </AlertTitle>\n        </Alert>\n        <Alert status=\"error\">\n          <AlertIcon />\n          <AlertDescription>{`${result.failure?.error}`}</AlertDescription>\n        </Alert>\n      </>\n    );\n  } else {\n    return (\n      <Alert status=\"success\">\n        <AlertIcon />\n      </Alert>\n    );\n  }\n};\n","export interface CodeFailure {\n    error: any\n    phase?: string\n}\n\nexport interface CodeResult<R> {\n    failure?: CodeFailure;\n    // can be a cancel function\n    result?: R;\n}\n\nconst AsyncFunction = Object.getPrototypeOf(async function () { }).constructor\n\nexport const execJsCode = <R = any>(code: string, context: Record<string, any>): Promise<CodeResult<R>> => {\n    let exec = null\n    let args = Object.keys(context)\n    try {\n        // exec takes a single param 'exports', for which we provide an empty object.\n        // This is because whenever you import modules in the user-provided code, the TS compiler wants to\n        // define a magic property on the implicit `exports` variable to indicate the user code is also an ES module.\n        // It errors out if that implicit `exports` variable is undefined.\n        //\n        // The returned anonymous function takes a single param `context` which we provide at execution time.\n        // context is used to pass in the metaframe object\n        exec = AsyncFunction('exports', `\"use strict\"; return (async function(${args.join(', ')}){${code}})`)({}) // eslint-disable-line\n    } catch (e) {\n        return Promise.resolve({ failure: { error: e, phase: 'compile' } })\n    }\n\n    if (exec) {\n        var phase = 'exec'\n        let values = Object.values(context);\n        if (exec.apply) {\n            return exec.apply(null, values)\n            .then((r: any) => ({ result: r }))\n            .catch((e: any) => ({ failure: { error: e, phase } }))\n        } else {\n            return exec.then((a :typeof AsyncFunction) => {\n                return a.apply(null, values);\n            })\n            .then((r: any) => ({ result: r,  }))\n            .catch((e: any) => ({ failure: { error: e, phase } }))\n        }\n    }\n\n    return Promise.resolve({ failure: { error: 'compile failed', phase: 'compile' } })\n}\n","import { useCallback, useEffect } from \"preact/hooks\";\nimport { execJsCode } from \"../hooks/codeHooks\";\nimport { useStore } from \"../store\";\nimport { useMetaframe } from \"@metapages/metaframe-hook\";\n\n// Exports lazy code executor\nexport const useExecuteCodeWithMetaframe: () => [\n  (c: string | undefined) => Promise<void>,\n  boolean,\n  any\n] = () => {\n  const metaframeObject = useMetaframe();\n  const setRunning = useStore((state) => state.setRunning);\n  const setResult = useStore((state) => state.setResult);\n  const result = useStore((state) => state.result);\n  const running = useStore((state) => state.running);\n\n  // if new results, cancel existing running code\n  useEffect(() => {\n    return () => {\n      if (result?.result && typeof result?.result === \"function\") {\n        try {\n          result.result();\n        } catch (err) {\n          console.error(\"Failed to cancel without error:\", err);\n        }\n      }\n    };\n  }, [result]);\n\n  const execute = useCallback(\n    async (code: string | undefined) => {\n      if (!code || code.trim().length === 0) {\n        setRunning(false);\n        setResult(undefined);\n        return;\n      }\n      if (!metaframeObject.metaframe) {\n        return;\n      }\n      setRunning(true);\n      setResult(undefined);\n      try {\n        const result = await execJsCode(code, {\n          metaframe: metaframeObject.metaframe,\n        });\n        setResult(result);\n      } catch (err) {\n        console.error(err);\n        setResult({ failure: { error: err } });\n      }\n      setRunning(false);\n    },\n    [metaframeObject.metaframe, setRunning, setResult]\n  );\n\n  return [execute, running, result];\n};\n","import { FunctionalComponent } from \"preact\";\nimport { useCallback } from \"preact/hooks\";\nimport { Button } from \"@chakra-ui/react\";\nimport {\n  MetaframeObject,\n  useMetaframe,\n  useHashParamBase64,\n} from \"@metapages/metaframe-hook\";\nimport { useStore } from \"../store\";\nimport { useExecuteCodeWithMetaframe } from \"../hooks/useExecuteCodeWithMetaframe\";\n\nexport const ButtonRun: FunctionalComponent = () => {\n  const metaframe: MetaframeObject = useMetaframe();\n  const isRunning = useStore((state) => state.running);\n  const codeInStore = useStore((state) => state.code);\n  const [runCode] = useExecuteCodeWithMetaframe();\n\n  // Split these next two otherwise editing is too slow as it copies to/from the URL\n  const [valueHashParam, setValueHashParam] = useHashParamBase64(\n    \"text\",\n    undefined\n  );\n\n  const onRun = useCallback(() => {\n    // If the values are different, update, this will trigger a new execution\n    if (valueHashParam !== codeInStore) {\n      setValueHashParam(codeInStore);\n    } else {\n      // The code values are the same, but the user clicked the button, so execute\n      if (runCode) {\n        runCode(codeInStore);\n      }\n    }\n  }, [\n    metaframe.setOutputs,\n    isRunning,\n    codeInStore,\n    valueHashParam,\n    runCode,\n    setValueHashParam,\n  ]);\n\n  return (\n    <Button colorScheme=\"blue\" onClick={onRun}>\n      Save + Run\n    </Button>\n  );\n};\n","import { FunctionalComponent } from \"preact\";\nimport { useCallback, useState } from \"preact/hooks\";\nimport {\n  Drawer,\n  DrawerOverlay,\n  DrawerContent,\n  DrawerBody,\n  IconButton,\n  DrawerCloseButton,\n} from \"@chakra-ui/react\";\nimport { isIframe } from \"@metapages/metaframe-hook\";\nimport { QuestionIcon } from \"@chakra-ui/icons\";\n\nexport const ButtonHelp: FunctionalComponent<{ url?: string }> = ({ url }) => {\n  const [open, setOpen] = useState<boolean>(isIframe() ? false : true);\n\n  url = url\n    ? url\n    : `${window.location.origin}${window.location.pathname}/README.md`;\n\n  const onClick = useCallback(() => {\n    setOpen(!open);\n  }, [open]);\n\n  return (\n    <>\n      <IconButton\n        verticalAlign=\"top\"\n        aria-label=\"Help\"\n        // @ts-ignore\n        icon={<QuestionIcon />}\n        size=\"lg\"\n        onClick={onClick}\n        mr=\"4\"\n      />\n      <HelpPanel url={url} isOpen={open} setOpen={setOpen} />\n    </>\n  );\n};\n\nconst HelpPanel: FunctionalComponent<{\n  url: string;\n  isOpen: boolean;\n  setOpen: (open: boolean) => void;\n}> = ({ isOpen, setOpen, url }) => {\n  const onClose = useCallback(() => {\n    setOpen(!isOpen);\n  }, [setOpen, isOpen]);\n\n  const onOverlayClick = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  const iframeUrl = `https://metapages.github.io/metaframe-markdown/#?url=${url}`;\n\n  return (\n    <Drawer\n      size=\"full\"\n      placement=\"top\"\n      onClose={onClose}\n      isOpen={isOpen}\n      onOverlayClick={onOverlayClick}\n    >\n      <DrawerOverlay>\n        <DrawerContent>\n          <DrawerCloseButton size=\"lg\" bg=\"gray.100\" />\n          <DrawerBody>\n            <iframe width=\"100%\" height=\"100%\" src={iframeUrl} />\n          </DrawerBody>\n        </DrawerContent>\n      </DrawerOverlay>\n    </Drawer>\n  );\n};\n","/**\n * Simple:\n *  - any input sets\n *    - the content to the editor\n *    - the name to the input name\n *    - the save button is deactivated\n *  The save button sends the editor content to the same input name\n */\n\nimport { FunctionalComponent } from \"preact\";\nimport { useEffect } from \"preact/hooks\";\nimport { Box, Flex, HStack, Spacer, VStack } from \"@chakra-ui/react\";\nimport {\n  useHashParamJson,\n  useHashParamBase64,\n} from \"@metapages/metaframe-hook\";\nimport { Editor } from \"./components/Editor\";\nimport { Option, OptionsMenuButton } from \"./components/OptionsMenu\";\nimport { CodeResults } from \"./components/CodeResults\";\nimport { useStore } from \"./store\";\nimport { useExecuteCodeWithMetaframe } from \"./hooks/useExecuteCodeWithMetaframe\";\nimport { ButtonRun } from \"./components/ButtonRun\";\nimport { ButtonHelp } from \"./components/ButtonHelp\";\n\nconst appOptions: Option[] = [\n  {\n    name: \"mode\",\n    displayName: \"Editor code mode\",\n    default: \"json\",\n    type: \"option\",\n    options: [\"json\", \"javascript\", \"python\", \"sh\"],\n  },\n  {\n    name: \"noautorun\",\n    displayName: \"Only run when Run is clicked\",\n    default: false,\n    type: \"boolean\",\n  },\n  {\n    name: \"theme\",\n    displayName: \"Light/Dark theme\",\n    default: \"light\",\n    type: \"option\",\n    options: [\"light\", \"vs-dark\"],\n  },\n  {\n    name: \"hideeditor\",\n    displayName: \"Hide editor\",\n    default: false,\n    type: \"boolean\",\n  },\n];\n\ntype OptionBlob = {\n  mode: string;\n  noautorun: boolean;\n  theme: string;\n  hideeditor: boolean;\n};\n\nexport const App: FunctionalComponent = () => {\n  // metaframe configuration\n  const [options] = useHashParamJson<OptionBlob>(\"options\", {\n    mode: \"json\",\n    noautorun: false,\n    theme: \"light\",\n    hideeditor: false,\n  });\n  const codeInStore = useStore((state) => state.code);\n  const setCodeInStore = useStore((state) => state.setCode);\n  const [runCode] = useExecuteCodeWithMetaframe();\n\n  // Split these next two otherwise editing is too slow as it copies to/from the URL\n  const [valueHashParam, setValueHashParam] = useHashParamBase64(\n    \"text\",\n    undefined\n  );\n\n  // source of truth: the URL param #?text=<HashParamBase64>\n  // if that changes, set the local value\n  // the local value changes fast from editing\n  useEffect(() => {\n    setCodeInStore(valueHashParam);\n    if (runCode) {\n      runCode(valueHashParam);\n    }\n  }, [valueHashParam, setCodeInStore, runCode]);\n\n  const menu = (\n    <VStack spacing={2} alignItems=\"flex-start\">\n      <Flex width=\"100%\">\n        <ButtonRun />\n        <Spacer />\n        <ButtonHelp />\n        <OptionsMenuButton options={appOptions} />\n      </Flex>\n      <CodeResults />\n    </VStack>\n  );\n\n  return (\n    <Box w=\"100%\" p={2}>\n      {options?.hideeditor ? (\n        menu\n      ) : (\n        <HStack spacing={2} alignItems=\"flex-start\">\n          <Box w=\"70%\">\n            <Editor\n              mode={options?.mode || \"json\"}\n              theme={options?.theme || \"light\"}\n              setValue={setCodeInStore}\n              value={codeInStore}\n            />\n          </Box>\n\n          <Box w=\"30%\">{menu}</Box>\n        </HStack>\n      )}\n    </Box>\n  );\n};\n","import { render } from \"preact\";\nimport { WithMetaframe } from \"@metapages/metaframe-hook\";\nimport { ChakraProvider } from \"@chakra-ui/react\";\nimport { App } from \"./App\";\n\nrender(\n  <ChakraProvider>\n    <WithMetaframe>\n      <App />\n    </WithMetaframe>\n  </ChakraProvider>,\n  document.getElementById(\"root\")!\n);\n"],"names":["MonacoEditor","useState","useCallback","DrawerOverlay","DrawerHeader","DrawerBody","BeatLoader","DrawerCloseButton","render"],"mappings":"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"}