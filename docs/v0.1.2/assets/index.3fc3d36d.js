import{v as e,i as D,l as I,A as g,I as b,S as N,d as x,U as M,y as C,M as O,D as P,a as V,b as j,B as w,G as W,c as y,T as G,C as T,e as k,f as L,g as U,h as q,j as K,k as Q,$ as B,r as J,m as A,n as R,o as X,p as Y,q as F,E as H,s as Z,L as _,Q as ee,t as te,V as z,F as ne,u as re,w as oe,z as ae,x as se}from"./vendor.72808761.js";const le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};le();const ie=({mode:n,value:t,setValue:r,theme:a})=>e(D,{defaultLanguage:n,theme:a,options:{minimap:{enabled:!1}},onChange:r,value:t,width:"100%",height:"80vh"}),ce=({options:n})=>{const[t,r]=I(!1),a=g(()=>{r(!t)},[t]);return e(x,null,e(b,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e(N,null),onClick:a}),e(ue,{isOpen:t,setOpen:r,options:n}))},ue=({isOpen:n,setOpen:t,options:r})=>{const[a,s]=M("options",Object.fromEntries(r.filter(i=>i.default).map(i=>[i.name,i.default]))),[o,l]=I(a||{}),[m,S]=I(void 0),p=g(i=>{const{name:f,value:u}=i.target;r.find(v=>v.name===f).type==="boolean"?l({...o,[f]:u==="1"}):l({...o,[f]:u})},[o,l]),$=g(()=>{t(!n)},[t,n]),E=g(()=>{const i={};if(Object.keys(o).forEach(u=>{const h=r.find(v=>v.name===u);if(h&&h.validator&&h.type!=="boolean"){const v=h.validator(o[u]);v&&(i[u]=v)}}),Object.keys(i).length>0){S(i);return}S(void 0);const f={};Object.keys(o).forEach(u=>{const h=r.find(v=>v.name===u);h&&h.map?f[u]=h.map(o[u]):f[u]=o[u]}),t(!n),s(f)},[t,n,r,o,s,S]);return C(()=>{const i=f=>{f.key==="Enter"&&n&&E()};return window.addEventListener("keyup",i),()=>{window.removeEventListener("keyup",i)}},[E,n]),e(L,{placement:"top",onClose:E,isOpen:n},e(O,null,e(P,null,e(V,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(j,null,e(w,{maxW:"100%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(W,{templateColumns:"repeat(12, 1fr)",gap:6},r.map(i=>e(x,null,e(y,{rowSpan:1,colSpan:4},e(w,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(G,{textAlign:"right",verticalAlign:"bottom"},i.displayName||i.name,":"))),e(y,{rowSpan:1,colSpan:8}," ",de(i,o[i.name],p)))),e(y,{rowSpan:1,colSpan:12}),e(y,{rowSpan:1,colSpan:12}),e(y,{rowSpan:1,colSpan:12}),e(y,{rowSpan:1,colSpan:10}),e(y,{rowSpan:1,colSpan:1},e(b,{size:"lg",color:"red",icon:e(T,null),onClick:$})),e(y,{rowSpan:1,colSpan:1},e(b,{size:"lg",color:"green",icon:e(k,null),onClick:E}))))))))},de=(n,t,r)=>{switch(n.type){case"option":return e(K,{name:n.name,value:t,onChange:r,placeholder:"Select option"},n.options.map(a=>e("option",{value:a},a)));case"boolean":return e(q,{name:n.name,rightIcon:e(k,null),onChange:r,isChecked:t===!0||t==="1",value:t?0:1});default:return e(w,{w:"100%",h:"10"},e(U,{name:n.name,type:"text",placeholder:"",value:t,onInput:r}))}};var c;(function(n){n[n.Start=0]="Start",n[n.Editing=1]="Editing",n[n.Running=2]="Running",n[n.Finished=3]="Finished"})(c||(c={}));const d=Q(n=>({code:void 0,result:void 0,mode:0,setCode:t=>n(r=>({code:t})),setResult:t=>n(r=>({result:t})),setMode:t=>n(r=>({mode:t}))})),me=()=>{const n=d(a=>a.mode),t=d(a=>a.result),[r]=B("presentation");return c.Running===n?e(J.BeatLoader,{size:8,color:"blue"}):!t||r?null:t.failure?e(x,null,e(A,{status:"error"},e(R,null),e(Y,{mr:2},"Error",t?.failure?.phase?" in phase "+t.failure.phase:"")),e(A,{status:"error"},e(R,null),e(X,null,`${t.failure?.error}`))):e(A,{status:"success"},e(R,null))},pe=Object.getPrototypeOf(async function(){}).constructor,fe=(n,t)=>{let r=null,a=Object.keys(t);try{r=pe("exports",`"use strict"; return (async function(${a.join(", ")}){${n}})`)({})}catch(o){return Promise.resolve({failure:{error:o,phase:"compile"}})}if(r){var s="exec";let o=Object.values(t);return r.apply?r.apply(null,o).then(l=>({result:l})).catch(l=>({failure:{error:l,phase:s}})):r.then(l=>l.apply(null,o)).then(l=>({result:l})).catch(l=>({failure:{error:l,phase:s}}))}return Promise.resolve({failure:{error:"compile failed",phase:"compile"}})},he=()=>{const n=F(),t=d(o=>o.setMode),r=d(o=>o.setResult),a=d(o=>o.result);return C(()=>()=>{if(a?.result&&typeof a?.result=="function")try{a.result()}catch(o){console.error("Failed to cancel without error:",o)}},[a]),[g(async o=>{if(!o||o.trim().length===0){t(c.Finished),r(void 0);return}if(!!n.metaframe){r(void 0);try{const l=await fe(o,{metaframe:n.metaframe});r(l)}catch(l){console.error(l),r({failure:{error:l}})}t(c.Finished)}},[n.metaframe,t,r]),a]},ge=()=>{const n=F(),t=d(m=>m.mode),r=d(m=>m.setMode),a=d(m=>m.code),[s,o]=H("text",void 0),l=g(()=>{switch(t){case c.Editing:s!==a&&o(a),r(c.Running);break;case c.Finished:r(c.Editing);break;case c.Running:r(c.Editing);break;case c.Start:break}},[n.metaframe,a,s,o,t,r]);return e(b,{verticalAlign:"top","aria-label":"Help",colorScheme:t===c.Editing?"blue":void 0,icon:t===c.Editing?e(k,null):e(Z,null),size:"md",onClick:l,mr:"4"})},ve=({url:n})=>{const[t,r]=I(!_());n=n||`${window.location.origin}${window.location.pathname}/README.md`;const a=g(()=>{r(!t)},[t]);return e(x,null,e(b,{verticalAlign:"top","aria-label":"Help",icon:e(ee,null),size:"md",onClick:a,mr:"4"}),e(ye,{url:n,isOpen:t,setOpen:r}))},ye=({isOpen:n,setOpen:t,url:r})=>{const a=g(()=>{t(!n)},[t,n]),s=g(()=>{t(!1)},[t]),o=`https://metapages.github.io/metaframe-markdown/#?url=${r}`;return e(L,{size:"full",placement:"top",onClose:a,isOpen:n,onOverlayClick:s},e(O,null,e(P,null,e(te,{size:"lg",bg:"gray.100"}),e(j,null,e("iframe",{width:"100%",height:"100%",src:o})))))},we=[{name:"theme",displayName:"Light/Dark theme",default:"light",type:"option",options:["light","vs-dark"]}],Se=()=>{const[n]=M("options",{theme:"light"}),[t]=B("presentation"),r=d(p=>p.code),a=d(p=>p.setCode),s=d(p=>p.mode),o=d(p=>p.setMode),[l]=he(),[m]=H("text",void 0);if(C(()=>{s===c.Start&&o(c.Running)},[s,o]),C(()=>{s===c.Running&&l&&l(r)},[s,r,l]),C(()=>{a(m),l&&l(m)},[m,a,l]),t)return e("div",{id:"render"});const S=e(z,{spacing:2,alignItems:"flex-start"},e(ne,{width:"100%"},e(ge,null),e(re,null),e(ve,null),e(ce,{options:we})),e(me,null));return e(w,{w:"100%",p:2},e(z,{spacing:2,alignItems:"flex-start"},s===c.Editing?e(w,{w:"100%"},e(ie,{mode:"javascript",theme:n?.theme||"light",setValue:a,value:r})):e("div",{id:"render"}),e(w,{w:"30%"},S)))};oe(e(se,null,e(ae,null,e(Se,null))),document.getElementById("root"));
//# sourceMappingURL=index.3fc3d36d.js.map
